!function(){"use strict";function n(n){return"function"==typeof n?n():n}function t(n){return!u(n)&&(e(n)||i(n)||r(n))}function e(n){return n.hasOwnProperty("action")}function i(n){return n.hasOwnProperty("href")}function o(n){return n.hasOwnProperty("isDivider")}function r(n){return n.hasOwnProperty("subMenu")}function u(n){return n.hasOwnProperty("html")||n.hasOwnProperty("element")}function c(n){return!t(n)&&!o(n)&&!u(n)}function a(e){return t(e)&&n(e.disabled)||r(e)&&0===n(e.subMenu).length}function d(n,t){var e;n.addEventListener("mouseenter",(function(n){e=setTimeout((function(){return t(n)}),150)})),n.addEventListener("mouseleave",(function(){return clearTimeout(e)}))}function s(n){var e=document.createElement("li");return function(n,t,e){n.filter((function(n){return(0,n[0])(t)})).every((function(n){n[0];var t=n[1],i=n[2];return!void e.classList.add(t)&&i}))}([[o,"divider",!1],[function(n){return n.icon},"icon",!0],[c,"heading",!1],[r,"submenu",!0],[a,"disabled",!1],[t,"interactive",!0]],n,e),o(n)||[f,l,v,m,h].forEach((function(t){return t.call(null,n,e)})),e}function f(t,e){var i,o=t.html,r=t.text,u=n(t.element);u?e.append(u):e.innerHTML=null!==(i=n(o))&&void 0!==i?i:"<span>".concat(n(r),"</span>")}function l(t,e){var i=t.tooltip,o=t.style,r=t.attributes;e.title=n(i)||"",o&&e.setAttribute("style",n(o)),r&&Object.entries(n(r)).forEach((function(n){var t=n[0],i=n[1];e.setAttribute(t,i)}))}function v(t,e){var i=t.icon;i&&(e.innerHTML+='<img class="icon" src="'.concat(n(i),'" />'))}function m(i,o){for(var u=0,c=Object.entries(n(i.events)||{});u<c.length;u++){var d=c[u],s=d[0],f=d[1],l="function"==typeof f?{listener:f,options:{}}:f,v=l.listener,m=l.options;o.addEventListener(s,v,m)}o.addEventListener("click",(function(n){a(i)||r(i)||(e(i)&&i.action(n),t(i)&&k.hide())}))}function h(t,e){if(i(t)&&!a(t)){var o=t.href,r=t.download,u=t.target,c=document.createElement("a");c.innerHTML=e.innerHTML,c.href=n(o),void 0!==r&&(c.download=n(r)),u&&(c.target=n(u)),e.replaceChildren(c)}}var x="r",p="d";function b(n,t){var e=y(),i=window.visualViewport,o=i.width,r=i.height;Object.assign(n.style,{maxHeight:r/e.y+"px",maxWidth:o/e.x+"px"});var u=function(n){var t=n.cloneNode(!0);t.style.visibility="hidden",document.body.appendChild(t);var e=w(t);return document.body.removeChild(t),e}(n);u.width=Math.trunc(u.width)+1,u.height=Math.trunc(u.height)+1;var c={x:0,y:0};if(t instanceof Element){var a=w(t),d=a.x,s=a.width,f=a.y;c={x:"r"===x?d+s:d-u.width,y:f},t.className.includes("submenu")&&(c.y+="d"===p?4:-12);var l=g(u,c);c.x!==l.x&&(x="r"===x?"l":"r",c.x="r"===x?d+s:d-u.width),c.y!==l.y&&(p="u"===p?"d":"u",c.y=l.y),c=g(u,c)}else{var v=""!==document.body.style.transform?document.body.getBoundingClientRect():{x:0,y:0};c=g(u,{x:(t.clientX-v.x)/e.x,y:(t.clientY-v.y)/e.y})}Object.assign(n.style,{left:c.x+"px",top:c.y+"px",width:u.width+"px",height:u.height+"px"})}function g(n,t){var e=window.visualViewport,i=e.width,o=e.height,r=""!==document.body.style.transform?document.body.getBoundingClientRect():{left:0,top:0},u=r.left,c=r.top,a=y(),d=-u/a.x,s=-c/a.y,f=(i-u)/a.x,l=(o-c)/a.y;return{x:"r"===x?t.x+n.width>f?f-n.width:t.x:t.x<d?d:t.x,y:"d"===p?t.y+n.height>l?l-n.height:t.y:t.y<s?s:t.y+n.height>l?l-n.height:t.y}}function w(n){var t=n.offsetLeft,e=n.offsetTop,i=n.offsetHeight,o=n.offsetWidth;if(n.offsetParent instanceof HTMLElement){var r=w(n.offsetParent);return{x:t+r.x,y:e+r.y,width:o,height:i}}return{x:t,y:e,width:o,height:i}}function y(){var n=document.body,t=n.getBoundingClientRect();return{x:t.width/n.offsetWidth,y:t.height/n.offsetHeight}}var k=function(){function t(){var n=this;this.cache={},this.i=!1;var e=function(){n.hide()};window.addEventListener("click",e),window.addEventListener("resize",e);var i=0;window.addEventListener("wheel",(function(){clearTimeout(i),i=setTimeout((function(){n.i?n.i=!1:n.hide()}))}),{passive:!0}),window.addEventListener("keydown",(function(t){"Escape"===t.key&&n.hide()})),t.o()}return t.t=function(){t.u||(t.u=new t);var n=t.u;return{attach:n.l.bind(n),delete:n.delete.bind(n),hide:n.hide.bind(n),show:n.show.bind(n),update:n.update.bind(n)}},t.prototype.l=function(n,t,e){var i=this;void 0===e&&(e={});var o=this.v(e),r=document.querySelector(n);if(void 0===this.cache[n])if(r){var u=function(n){i.show(t,n,o)};this.cache[n]={m:t,h:u,p:o},r.addEventListener("contextmenu",u)}else console.error("target element ".concat(n," not found"));else console.error("target element ".concat(n," already has a context menu assigned. Use ContextMenu.update() intstead."))},t.prototype.update=function(n,t,e){void 0===e&&(e={});var i=this.cache[n],o=Object.assign({},null==i?void 0:i.p,e),r=document.querySelector(n);i&&(null==r||r.removeEventListener("contextmenu",i.h)),delete this.cache[n],this.l(n,t||(null==i?void 0:i.m)||[],o)},t.prototype.delete=function(n){var t=this.cache[n];if(!t)return console.error("no context menu for target element ".concat(n," found"));delete this.cache[n];var e=document.querySelector(n);if(!e)return console.error("target element ".concat(n," does not exist (anymore)"));e.removeEventListener("contextmenu",t.h)},t.prototype.show=function(n,t,e){var i,o,r,u=this;t instanceof MouseEvent&&(t.stopImmediatePropagation(),t.preventDefault()),this.hide();var c=this.v(e);this.onHide=c.onHide,this.onBeforeHide=c.onBeforeHide;var a=null!==(o=null===(i=c.onBeforeShow)||void 0===i?void 0:i.call(c,n.slice(),t instanceof MouseEvent?t:void 0))&&void 0!==o?o:n;this.g=this.k(a,t,c.attributes),document.body.appendChild(this.g),null===(r=c.onShow)||void 0===r||r.call(c,this.g),this.g.addEventListener("wheel",(function(){u.i=!0}),{passive:!0})},t.prototype.hide=function(n){var t,e;void 0===n&&(n=this.g),null===(t=this.onBeforeHide)||void 0===t||t.call(this,n),x="r",p="d",n&&(n===this.g&&delete this.g,n.remove(),null===(e=this.onHide)||void 0===e||e.call(this,n),this.onBeforeHide=void 0,this.onHide=void 0)},t.prototype.v=function(n){return void 0===n&&(n={}),Object.assign({onBeforeShow:function(n){return n},onBeforeHide:function(){},onShow:function(){},onHide:function(){}},n)},t.prototype.k=function(t,e,i){var o=this;void 0===i&&(i={});var u=function(n){var t=document.createElement("ul");t.className="ctxmenu",t.append.apply(t,n.map(s)),n.length||(t.style.display="none");var e=function(n){n.stopPropagation(),n.preventDefault()};return t.addEventListener("contextmenu",e),t.addEventListener("click",e),t}(t);return b(u,e),t.forEach((function(t,e){var i=u.children[e];d(i,(function(){var n,t=null===(n=i.parentElement)||void 0===n?void 0:n.querySelector("ul");t&&t.parentElement!==i&&o.hide(t)})),a(t)||r(t)&&d(i,(function(){i.querySelector("ul")||i.appendChild(o.k(n(t.subMenu),i,n(t.subMenuAttributes)))}))})),Object.entries(i).forEach((function(n){var t=n[0],e=n[1];return u.setAttribute(t,e)})),u},t.o=function(){if("loading"===document.readyState)return document.addEventListener("readystatechange",this.o,{once:!0});var n=document.createElement("style");n.innerHTML='html{min-height:100%}.ctxmenu{position:fixed;border:1px solid #999;padding:2px 0;box-shadow:#aaa 3px 3px 3px;background:#fff;margin:0;z-index:9999;overflow-y:auto;font:15px Verdana,sans-serif;box-sizing:border-box}.ctxmenu li{margin:1px 0;display:block;position:relative;user-select:none}.ctxmenu li.heading{font-weight:bold;margin-left:-5px}.ctxmenu li span{display:block;padding:2px 20px;cursor:default}.ctxmenu li a{color:inherit;text-decoration:none}.ctxmenu li.icon{padding-left:15px}.ctxmenu img.icon{position:absolute;width:18px;left:10px;top:2px}.ctxmenu li.disabled{color:#ccc}.ctxmenu li.divider{border-bottom:1px solid #aaa;margin:5px 0}.ctxmenu li.interactive:hover{background:rgba(0,0,0,.1)}.ctxmenu li.submenu::after{content:"";position:absolute;display:block;top:0;bottom:0;right:.4em;margin:auto .1rem auto auto;border:solid #000;border-width:1px 1px 0 0;transform:rotate(45deg);width:.3rem;height:.3rem}.ctxmenu li.submenu.disabled::after{border-color:#ccc}',document.head.insertBefore(n,document.head.childNodes[0])},t}().t();
/*! ctxMenu v1.7.0 | (c) Nikolaj Kappler | https://github.com/nkappler/ctxmenu/blob/master/LICENSE !*/window.ctxmenu=k}();
